@page
@model MarketingBlogApp.Pages.Admin.DashboardModel
@{
    Layout = "/Pages/Shared/_Admin.cshtml";
}

<h1 class="mt-4">Admin Dashboard</h1>

<div class="container">
    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
        <h2>Webpage Activity</h2>
    </div>
    <div class="row mb-3">
        <div class="col-md-4">
            <div class="card text-white bg-primary mb-3">
                <div class="card-body">
                    <h5 class="card-title text-center">Total Posts</h5>
                    <div class="chart-container">
                        <canvas id="totalPostsChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-white bg-success mb-3">
                <div class="card-body">
                    <h5 class="card-title text-center">Total Categories</h5>
                    <div class="chart-container">
                        <canvas id="totalCategoriesChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-white bg-warning mb-3">
                <div class="card-body">
                    <h5 class="card-title text-center">Total Visits</h5>
                    <div class="chart-container">
                        <canvas id="totalVisitsChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
        <h2>Management</h2>
    </div>

    <div class="row">
        <div class="col-md-4">
            <div class="card text-white bg-danger mb-3">
                <div class="card-body">
                    <h5 class="card-title">Manage Users</h5>
                    <p class="card-text">View, edit, and disable user accounts.</p>
                    <a href="/Admin/Users/Index" class="btn btn-light">Users List</a>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-white bg-info mb-3">
                <div class="card-body">
                    <h5 class="card-title">Disabled Users</h5>
                    <p class="card-text">View and enable disabled user accounts.</p>
                    <a href="/Admin/Users/DisabledUsers" class="btn btn-light">Disabled Users List</a>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-white bg-secondary mb-3">
                <div class="card-body">
                    <h5 class="card-title">User Activity</h5>
                    <p class="card-text">View recent user activities.</p>
                    <a href="/Admin/Users/Activity" class="btn btn-light">View Activity</a>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-white bg-dark mb-3">
                <div class="card-body">
                    <h5 class="card-title">Category</h5>
                    <p class="card-text">Manage blog categories.</p>
                    <a href="/Admin/Categories/Index" class="btn btn-light">Create Category</a>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-white bg-dark mb-3">
                <div class="card-body">
                    <h5 class="card-title">Manager Actions</h5>
                    <p class="card-text">Manage actions performed by managers.</p>
                    <a href="/Admin/ManagerActions" class="btn btn-light">View Manager Actions</a>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-white bg-dark mb-3">
                <div class="card-body">
                    <h5 class="card-title">Warnings</h5>
                    <p class="card-text">View and resolve warnings issued to users.</p>
                    <a href="/Admin/Warnings" class="btn btn-light">View Warnings</a>
                </div>
            </div>
        </div>
    </div>
</div>
<style>
    .equal-height {
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }

        .equal-height .card-body {
            flex: 1;
        }
</style>

@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        var totalPostsChart = new Chart(document.getElementById('totalPostsChart'), {
            type: 'doughnut',
            data: {
                labels: ['Total Posts'],
                datasets: [{
                    label: 'Total Posts',
                    data: [@Model.TotalPosts],
                    backgroundColor: ['rgba(255, 255, 255, 0.2)'],
                    borderColor: ['rgba(255, 255, 255, 1)'],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        callbacks: {
                            label: function (context) {
                                return context.raw + ' Posts';
                            }
                        }
                    }
                }
            }
        });

        var totalCategoriesChart = new Chart(document.getElementById('totalCategoriesChart'), {
            type: 'doughnut',
            data: {
                labels: ['Total Categories'],
                datasets: [{
                    label: 'Total Categories',
                    data: [@Model.TotalCategories],
                    backgroundColor: ['rgba(255, 255, 255, 0.2)'],
                    borderColor: ['rgba(255, 255, 255, 1)'],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        callbacks: {
                            label: function (context) {
                                return context.raw + ' Categories';
                            }
                        }
                    }
                }
            }
        });

        var totalVisitsChart = new Chart(document.getElementById('totalVisitsChart'), {
            type: 'doughnut',
            data: {
                labels: ['Total Visits'],
                datasets: [{
                    label: 'Total Visits',
                    data: [@Model.TotalVisits],
                    backgroundColor: ['rgba(255, 255, 255, 0.2)'],
                    borderColor: ['rgba(255, 255, 255, 1)'],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        callbacks: {
                            label: function (context) {
                                return context.raw + ' Visits';
                            }
                        }
                    }
                }
            }
        });
    </script>
}
